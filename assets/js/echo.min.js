/*! Echo - v0.1.0
 * http://wordpress.org/plugins
 * Copyright (c) 2014; * Licensed GPLv2+ */
(function(t){"use strict";function e(){i===undefined&&(i=new o.Modal),i.open()}var i,o=t.echo=t.echo||{},n=wp.media;_.defaults(o.data||{},{}),o.Controller=n.controller.State.extend(function(){function t(){this.set("library",new Backbone.Collection),this.set("selection",new Backbone.Collection)}return{defaults:{id:"codeLibrary",toolbar:"insert",router:"tabs",sidebar:"settings",content:"codeLibrary",menu:"default",title:"Code Jots",select:!0},initialize:t}}()),o.Modal=n.view.MediaFrame.extend(function(){function t(){n.view.MediaFrame.prototype.initialize.apply(this,arguments),this.on("all",function(t){console.log(t)}),_.defaults(this.options,{state:"codeLibrary",button:{text:"Insert Jot"}}),this.states.add([new o.Controller]),this.bindHandlers()}function e(){this.on("router:create:tabs",this.createRouter,this),this.on("router:render:tabs",this.renderRouter,this),this.on("content:create:codeLibrary",this.libraryContent,this),this.on("content:create:codeEdit",this.editContent,this),this.on("toolbar:create:insert",this.createToolbar,this)}function i(t){t.set({codeLibrary:{text:"Jot Library",priority:20},codeEdit:{text:"Edit Jot",priority:40}})}function r(t){t.view=new o.view.Library({controller:this})}function a(t){t.view=new o.view.Edit({controller:this})}function s(t,e){e=e||this.options.button||{},e.controller=this,t.view=new n.view.Toolbar.Select(e)}return{initialize:t,bindHandlers:e,renderRouter:i,libraryContent:r,editContent:a,createToolbar:s}}()),o.view={},o.view.Library=n.View.extend(function(){function t(){this.createSidebar(),this.createToolbar()}function e(){var t=this.options,e=(t.selection,this.sidebar=new n.view.Sidebar({controller:this.controller}));this.views.add(e)}function i(){this.toolbar=new n.view.Toolbar({controller:this.controller}),this.views.add(this.toolbar)}return{tagName:"div",className:"jot-library",initialize:t,createSidebar:e,createToolbar:i}}()),o.view.Edit=n.View.extend(function(){function t(){this.createSidebar()}function e(){var t=this.options;t.selection,this.sidebar=new n.view.Sidebar({controller:this.controller}),this.views.add(this.sidebar)}return{tagName:"div",className:"jot-editor",initialize:t,createSidebar:e}}()),o.open=e})(this);